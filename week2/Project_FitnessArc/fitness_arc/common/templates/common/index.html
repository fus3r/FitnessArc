{% extends "base.html" %}
{% block title %}Accueil - Fitness Arc{% endblock %}
{% block content %}
<div style="text-align:center;padding:3rem 0">
  <h1 style="font-size:3rem;margin-bottom:1rem">ðŸ’ª Fitness Arc</h1>
  <p style="font-size:1.25rem;color:var(--text-dim);margin-bottom:2rem">
    Votre compagnon pour l'entraÃ®nement et la nutrition
  </p>
  
  <div class="home-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:2rem;margin-top:3rem">
    {% if user.is_authenticated %}
    <a href="{% url 'dashboard:index' %}" class="card clickable-card dashboard-card" style="text-align:left;background:linear-gradient(135deg,rgba(99,102,241,0.2),rgba(139,92,246,0.15));border:1px solid rgba(99,102,241,0.4);text-decoration:none">
      <div class="card-bg-effect"></div>
      <div class="card-content">
        <h3 style="margin:0 0 0.75rem">Dashboard</h3>
        <p style="color:var(--text-dim);margin:0">Vue d'ensemble de vos calories, volume et progrÃ¨s</p>
      </div>
      <span class="hover-indicator">Ouvrir â†’</span>
    </a>
    {% endif %}
    
    <div class="card non-clickable-card" style="text-align:left">
      <h3 style="margin:0 0 0.75rem">EntraÃ®nements</h3>
      <p style="color:var(--text-dim);margin:0 0 1.25rem">GÃ©rez vos exercices, crÃ©ez des templates et loggez vos sÃ©ances</p>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:0.5rem">
        <a href="{% url 'workouts:exercise_list' %}" class="mini-link">
          Exercices
        </a>
        <a href="{% url 'workouts:template_list' %}" class="mini-link secondary">
          Workouts
        </a>
      </div>
    </div>
    
    <a href="{% url 'nutrition_today' %}" class="card clickable-card" style="text-align:left;text-decoration:none">
      <div class="card-content">
        <h3 style="margin:0 0 0.75rem">Nutrition</h3>
        <p style="color:var(--text-dim);margin:0">Suivez votre alimentation quotidienne et vos macros</p>
      </div>
      <span class="hover-indicator">Ouvrir â†’</span>
    </a>
    
    {% if user.is_authenticated %}
    <a href="{% url 'accounts:profile' %}" class="card clickable-card" style="text-align:left;text-decoration:none">
      <div class="card-content">
        <h3 style="margin:0 0 0.75rem">Mon Profil</h3>
        <p style="color:var(--text-dim);margin:0">GÃ©rez vos informations personnelles et vos objectifs</p>
      </div>
      <span class="hover-indicator">Ouvrir â†’</span>
    </a>
    {% else %}
    <div class="card non-clickable-card" style="text-align:left">
      <h3 style="margin:0 0 0.75rem">Commencer</h3>
      <p style="color:var(--text-dim);margin:0 0 1.25rem">CrÃ©ez un compte pour commencer Ã  suivre vos progrÃ¨s</p>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:0.5rem">
        <a href="{% url 'accounts:signup' %}" class="mini-link primary">
          S'inscrire
        </a>
        <a href="{% url 'accounts:login' %}" class="mini-link secondary">
          Se connecter
        </a>
      </div>
    </div>
    {% endif %}
  </div>
  
  {% if user.is_authenticated %}
  <div class="card" style="margin-top:3rem;background:linear-gradient(135deg,rgba(99,102,241,0.12),rgba(139,92,246,0.08));border:1px solid rgba(99,102,241,0.3);position:relative;overflow:hidden">
    <div style="position:absolute;top:0;right:0;width:300px;height:300px;background:radial-gradient(circle,rgba(236,72,153,0.15),transparent 70%);pointer-events:none"></div>
    <div style="position:relative;z-index:1">
      <h2 style="margin:0 0 0.75rem;display:flex;align-items:center;gap:0.75rem">
        <span>Bienvenue, {{ user.username }} !</span>
        <span style="font-size:1.75rem">ðŸ‘‹</span>
      </h2>
      <p style="color:var(--text-dim);margin:0;font-size:1.05rem">
        Vous avez <strong style="color:var(--primary);font-size:1.15rem">{{ templates_count }}</strong> template(s) d'entraÃ®nement
        {% if today_logs_count > 0 %}
        et <strong style="color:var(--success);font-size:1.15rem">{{ today_logs_count }}</strong> entrÃ©e(s) nutritionnelle(s) aujourd'hui.
        {% else %}
        â€¢ <span style="opacity:0.7">Aucune entrÃ©e nutritionnelle aujourd'hui</span>
        {% endif %}
      </p>
    </div>
  </div>
  {% endif %}
</div>

<style>
/* Reset et isolation */
.home-grid {
  position: relative;
}

.home-grid > * {
  position: relative;
  z-index: 1;
}

/* Cards de base */
.card {
  position: relative;
  overflow: hidden;
  isolation: isolate;
}

/* Cards cliquables - hover sur toute la carte */
.clickable-card {
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4,0,0.2,1);
  will-change: transform;
}

.clickable-card .card-content {
  position: relative;
  z-index: 1;
}

.clickable-card .card-bg-effect {
  position: absolute;
  top: -50%;
  right: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle,rgba(99,102,241,0.1),transparent 50%);
  pointer-events: none;
  z-index: 0;
}

/* Hover sur carte cliquable uniquement */
.clickable-card:hover {
  transform: translateY(-8px);
  box-shadow: 0 20px 60px rgba(0,0,0,0.7);
  border-color: rgba(99,102,241,0.6) !important;
  z-index: 10;
}

/* Cards non-cliquables - pas de hover sur la carte */
.non-clickable-card {
  cursor: default;
  pointer-events: auto;
}

.non-clickable-card:hover {
  transform: none !important;
  z-index: 1 !important;
  box-shadow: 0 8px 32px rgba(0,0,0,0.3) !important;
  border-color: rgba(99,102,241,0.15) !important;
}

/* Hover indicator - visible uniquement sur hover de carte cliquable */
.hover-indicator {
  position: absolute;
  bottom: 1.25rem;
  right: 1.25rem;
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--primary);
  opacity: 0;
  transform: translateX(-10px);
  transition: all 0.3s cubic-bezier(0.4,0,0.2,1);
  pointer-events: none;
  letter-spacing: 0.02em;
  z-index: 2;
}

.clickable-card:hover .hover-indicator {
  opacity: 0.9;
  transform: translateX(0);
}

/* Mini links dans les blocs non-cliquables */
.mini-link {
  background: rgba(99,102,241,0.15);
  border: 1px solid rgba(99,102,241,0.3);
  color: var(--text);
  text-decoration: none;
  padding: 0.75rem;
  border-radius: 8px;
  text-align: center;
  font-size: 13px;
  font-weight: 500;
  transition: all 0.25s cubic-bezier(0.4,0,0.2,1);
  display: block;
  position: relative;
  cursor: pointer;
  z-index: 2;
}

.mini-link.secondary {
  background: rgba(71,85,105,0.8);
  border: 1px solid rgba(100,116,139,0.3);
}

.mini-link.primary {
  background: linear-gradient(135deg,var(--primary),var(--secondary));
  border: none;
  color: #fff;
}

.mini-link:hover {
  background: rgba(99,102,241,0.3);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(99,102,241,0.4);
  border-color: rgba(99,102,241,0.5);
  z-index: 3;
}

.mini-link.secondary:hover {
  background: rgba(71,85,105,1);
  box-shadow: 0 4px 12px rgba(0,0,0,0.4);
}

.mini-link.primary:hover {
  box-shadow: 0 6px 20px rgba(99,102,241,0.6);
}

/* S'assurer que les mini-links ne dÃ©clenchent pas le hover de la carte parent */
.non-clickable-card .mini-link {
  pointer-events: auto;
}
</style>
{% endblock %}
