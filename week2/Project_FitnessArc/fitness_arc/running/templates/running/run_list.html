{% extends "base.html" %}
{% block title %}Mes sorties running{% endblock %}

{% block content %}
<div class="card">
  <h1>Mes sorties running</h1>

  <!-- Section Strava -->
  <div style="margin-bottom:2rem;padding:1rem;background:rgba(252,76,2,0.1);border-radius:8px;border:2px solid rgba(252,76,2,0.3)">
    <h3 style="margin-top:0;display:flex;align-items:center;gap:0.5rem">
      <span style="font-size:1.5rem">üèÉ</span>
      Strava
    </h3>
    {% if not strava_connected %}
      <p style="margin:0.5rem 0">Tu n'as pas encore connect√© ton compte Strava.</p>
      <a href="{% url 'running:strava_connect' %}" class="btn" style="background:#fc4c02;border-color:#fc4c02">
        Connecter Strava
      </a>
    {% else %}
      <p style="margin:0.5rem 0">Compte Strava connect√© ‚úÖ</p>
      <a href="{% url 'running:strava_connect' %}" class="btn" style="background:#fc4c02;border-color:#fc4c02">
        Re-synchroniser avec Strava
      </a>
    {% endif %}
  </div>

  <!-- Section Garmin -->
  <div style="margin-bottom:2rem;padding:1rem;background:rgba(0,114,206,0.1);border-radius:8px;border:2px solid rgba(0,114,206,0.3)">
    <h3 style="margin-top:0;display:flex;align-items:center;gap:0.5rem">
      <span style="font-size:1.5rem">‚åö</span>
      Garmin Connect
    </h3>
    {% if not garmin_connected %}
      <p style="margin:0.5rem 0">Tu n'as pas encore connect√© ton compte Garmin Connect.</p>
      <a href="{% url 'running:garmin_connect' %}" class="btn" style="background:#0072ce;border-color:#0072ce">
        Connecter Garmin Connect
      </a>
    {% else %}
      <p style="margin:0.5rem 0">Compte Garmin Connect connect√© ‚úÖ</p>
      <a href="{% url 'running:garmin_sync' %}" class="btn" style="background:#0072ce;border-color:#0072ce">
        Re-synchroniser avec Garmin
      </a>
    {% endif %}
  </div>

  {% if runs %}
    <table>
      <thead>
        <tr>
          <th>Date</th>
          <th>Nom</th>
          <th>Distance</th>
          <th>Dur√©e</th>
          <th>Allure moyenne</th>
          <th>D+</th>
        </tr>
      </thead>
      <tbody>
        {% for run in runs %}
          <tr>
            <td>{{ run.start_date|date:"d/m/Y H:i" }}</td>
            <td>{{ run.name }}</td>
            <td>{{ run.distance_km|floatformat:2 }} km</td>
            <td>{{ run.moving_time_hms }}</td>
            <td>
              {% if run.pace_min_per_km %}
                {{ run.pace_min_per_km }}
              {% else %}
                -
              {% endif %}
            </td>
            <td>{{ run.elevation_gain_m|default:"0"|floatformat:0 }} m</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>Aucune sortie enregistr√©e pour le moment.</p>
  {% endif %}
</div>
{% endblock %}
