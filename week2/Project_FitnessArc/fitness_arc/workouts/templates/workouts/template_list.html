{% extends "base.html" %}
{% block title %}Mes templates{% endblock %}
{% block content %}
<h1>Mes templates</h1>

<p><a class="btn" href="{% url 'workouts:template_create' %}">+ Nouveau template</a></p>

<h2 style="margin-top:2rem">ğŸ“ Mes templates personnalisÃ©s</h2>
<table>
  <thead>
    <tr><th>Nom</th><th>Items</th><th>Actions</th></tr>
  </thead>
  <tbody>
    {% for tpl in my_templates %}
      <tr>
        <td><a href="{% url 'workouts:template_detail' tpl.pk %}">{{ tpl.name }}</a></td>
        <td>{{ tpl.items.count }}</td>
        <td>
          {% if tpl.items.count %}
            <a class="btn" href="{% url 'workouts:start_session' tpl.pk %}">DÃ©marrer une sÃ©ance</a>
            <a class="btn" href="{% url 'workouts:template_detail' tpl.pk %}">GÃ©rer les items</a>
          {% else %}
            <a class="btn" href="{% url 'workouts:template_detail' tpl.pk %}">Ajouter des items</a>
          {% endif %}
          <a href="{% url 'workouts:template_delete' tpl.pk %}" class="btn" style="background:#dc3545;margin-left:0.5rem">Supprimer</a>
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="3"><em>Aucun template personnel. CrÃ©ez-en un ou utilisez les templates publics ci-dessous.</em></td></tr>
    {% endfor %}
  </tbody>
</table>

<h2 style="margin-top:3rem">ğŸŒŸ Templates publics (Push/Pull/Legs)</h2>
<table>
  <thead>
    <tr><th>Nom</th><th>Items</th><th>Actions</th></tr>
  </thead>
  <tbody>
    {% for tpl in public_templates %}
      <tr>
        <td>
          <a href="{% url 'workouts:template_detail' tpl.pk %}">{{ tpl.name }}</a>
          <span style="background:#ffc107;color:#000;padding:2px 6px;border-radius:4px;font-size:0.75rem;margin-left:0.5rem">PUBLIC</span>
        </td>
        <td>{{ tpl.items.count }}</td>
        <td>
          <a class="btn" href="{% url 'workouts:start_session' tpl.pk %}">DÃ©marrer une sÃ©ance</a>
          <a class="btn" style="background:#6c757d" href="{% url 'workouts:template_detail' tpl.pk %}">Voir le dÃ©tail</a>
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="3"><em>Aucun template public disponible.</em></td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
